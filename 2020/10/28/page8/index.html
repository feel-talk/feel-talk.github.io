<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Manjaro[KDE]安装到使用 | FeelTalk</title>

  
  <meta name="author" content="Feeltalk">
  

  
  <meta name="description" content="折腾基于Arch的Linux发行版：Manjaro 【KDE桌面】，本文有一些我在安装和使用Manjaro中所遇到的问题和解决方案，包括英特尔+英伟达双显卡的驱动问题。">
  

  
  
  <meta name="keywords" content="Linux">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Manjaro[KDE]安装到使用"/>

  <meta property="og:site_name" content="FeelTalk"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="FeelTalk" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">FeelTalk</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Manjaro[KDE]安装到使用</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2020/10/28/page8/" rel="bookmark">
        <time class="entry-date published" datetime="2020-10-28T04:30:00.000Z">
          2020-10-28
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h3 id="折腾基于Arch的Linux发行版：Manjaro-【KDE桌面】，本文有一些我在安装和使用Manjaro中所遇到的问题和解决方案，包括英特尔-英伟达双显卡的驱动问题。"><a href="#折腾基于Arch的Linux发行版：Manjaro-【KDE桌面】，本文有一些我在安装和使用Manjaro中所遇到的问题和解决方案，包括英特尔-英伟达双显卡的驱动问题。" class="headerlink" title="折腾基于Arch的Linux发行版：Manjaro 【KDE桌面】，本文有一些我在安装和使用Manjaro中所遇到的问题和解决方案，包括英特尔+英伟达双显卡的驱动问题。"></a>折腾基于Arch的Linux发行版：Manjaro 【KDE桌面】，本文有一些我在安装和使用Manjaro中所遇到的问题和解决方案，包括<strong>英特尔+英伟达双显卡</strong>的驱动问题。</h3><a id="more"></a>

<h1 id="1-安装前"><a href="#1-安装前" class="headerlink" title="1.安装前"></a>1.安装前</h1><p><strong>1.进入到grub界面，首先选择语言为Chinese–&gt;zh-CN</strong></p>
<p><strong>2.选择drives=nofree（带有英伟达显卡的务必选这个）</strong></p>
<h1 id="2-进行安装"><a href="#2-进行安装" class="headerlink" title="2.进行安装"></a>2.进行安装</h1><p><strong>主要是选择分区，分区步骤：</strong></p>
<p><strong>1.选择300M，格式为FAT32，挂载点为/boot/efi，标记为boot</strong></p>
<p><strong>2.选择15G，格式为exT4，挂载点为/opt</strong></p>
<p><strong>3.选择30G，格式为exT4，挂载点为/</strong></p>
<p><strong>4.选择剩余空间，格式为exT4，挂载点为/home</strong></p>
<p><strong>5.点击下一步，点继续安装</strong></p>
<p><strong>注意：最好空出几个G空间出来，不要问为什么</strong></p>
<h1 id="3-安装后"><a href="#3-安装后" class="headerlink" title="3.安装后"></a>3.安装后</h1><p><strong>1.更改为国内软件源</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo pacman-mirrors -i -c China -m rank</span></span><br></pre></td></tr></table></figure>
<p><strong>然后选择延迟最低的源，点击确定</strong><br><strong>2.更新软件源</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo pacman -Syyu</span> </span><br></pre></td></tr></table></figure>
<p><strong>3.安装第三方包管理器yay和vim</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo pacman -S yay</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yay -S vim</span></span><br></pre></td></tr></table></figure>
<p>yay命令跟pacman命令用一样点参数，而且不用加sudo<br><strong>4.安装googlepinyin中文输入法</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yay -S fcitx-im</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yay -S fcitx-configtool</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yay -S fcitx-googlepinyin</span></span><br></pre></td></tr></table></figure>
<p>使用vim编辑～/.xprofile文件，加入一下文本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> GTK_IM_MODULE=fcitx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> QT_IM_MODULE=fcitx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> XMODIFIERS=<span class="string">&quot;@im=fcitx&quot;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>5.安装解包之内工具：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S pkgconf fakeroot patch</span><br></pre></td></tr></table></figure>
<p><strong>6.如果发现系统没有声音，声音设备显示伪输出，执行以下命令（有声音就不用看这条）</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> “options snd-hda-intel dmic_detect=0” | sudo tee -a /etc/modprobe.d/alsa-base.conf</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> “blacklist snd_soc_skl” | sudo tee -a /etc/modprobe.d/blacklist.conf</span></span><br></pre></td></tr></table></figure>
<p><strong>7.完成以上操作就reboot</strong></p>
<h1 id="4-使用中"><a href="#4-使用中" class="headerlink" title="4.使用中"></a>4.使用中</h1><p><strong>1.科学上网</strong></p>
<p>Qv2ray:</p>
<p><a target="_blank" rel="noopener" href="https://tlanyan.me/download.php?filename=/v2/linux/Qv2ray.v2.6.3.linux-x64.AppImage">免安装程序</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/v2ray/v2ray-core/releases/download/v4.28.2/v2ray-linux-64.zip">v2ray内核</a></p>
<p>ssr-gtk:</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Baloneo/ssr-gtk">ssr-gtk</a>(需安装的包：media-control-indicator-git)</p>
<p><strong>2.解决下载软件时git clone很慢的情况</strong></p>
<p>配置git帐号信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.name <span class="string">&quot;你的git名称&quot;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.email 你的git邮箱</span></span><br></pre></td></tr></table></figure>
<p>生成SSH密钥</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C “你的git邮箱”    <span class="comment">#一路回车</span></span><br></pre></td></tr></table></figure>
<p>复制公钥</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> .ssh/</span><br><span class="line">$ cat id_rsa.pub   <span class="comment">#将显示出来点公钥全部复制</span></span><br></pre></td></tr></table></figure>
<p>进入你的github账户设置添加SSH密钥<br><img src="https://uploader.shimo.im/f/j3TT9mUKAv1lDBK2.png!thumbnail" alt="图片"></p>
<p>设置git clone代理（每次开启代理都要设置，SSR端口默认为1080，Qv2ray默认为1089）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">$ git config --global https.proxy socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>
<p>确保打开了SSR或者Qv2ray全局代理模式，然后便可以快速的clone了<br><strong>3.yay安装出现错误解决</strong></p>
<p>如果出现以下错误</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: 无法访问 <span class="string">&#x27;***&#x27;</span>：OpenSSL SSL_connect: SSL_ERROR_SYSCALL <span class="keyword">in</span> connection to aur.archlinux.org:443</span><br></pre></td></tr></table></figure>
<p>运行以下命令即可解决</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global --<span class="built_in">unset</span> http.proxy</span><br><span class="line"><span class="comment">#如果速度慢运行以下命令</span></span><br><span class="line">$ git config --global http.proxy socks5://127.0.0.1:1080</span><br><span class="line">$ git config --global https.proxy socks5://127.0.0.1:1080</span><br></pre></td></tr></table></figure>
<p><strong>4.安装美化下载工具</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yay -S ocs-url</span><br></pre></td></tr></table></figure>
<p><strong>5.解决QQ/Tim闪退，打不了中文</strong></p>
<p>如果闪退，执行以下命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S gnome-settings-daemon</span><br><span class="line">$ sudo cp /etc/xdg/autostart/org.gnome.SettingsDaemon.XSettings.desktop   ~/.config/autostart</span><br></pre></td></tr></table></figure>
<p>然后打开系统设置-&gt;开机或关机-&gt;自动启动-&gt;添加脚本-&gt;输入/usr/lib/gsd-xsettings，重启<br>如果发现打不了中文在‘/opt/deepinwine/apps/Deepin-TIM/run.sh’开头加入以下命令，并重启：</p>
<p>export GTK_IM_MODULE=fcitxexport QT_IM_MODULE=fcitxexport XMODIFIERS=@im=fcitx</p>
<p>安装TIM</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yay -S deepin-wine-tim</span><br></pre></td></tr></table></figure>
<p><strong>6.安装微信</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ yay -S deepin-wine-wechat</span><br><span class="line">$ yay -S deepin-wine</span><br></pre></td></tr></table></figure>
<p>修改以下两个文件的WINE_CMD的值</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /opt/deepinwine/apps/Deepin-WeChat/run.sh</span><br><span class="line">$ sudo vim /opt/deepinwine/tools/run.sh</span><br><span class="line"><span class="comment"># 改成WINE_CMD=&quot;deepin-wine&quot;</span></span><br></pre></td></tr></table></figure>
<p><strong>7.解决网易云音乐无法加载问题（貌似能解决）</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yay -S automake autoconf bison flex</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yay -S gstreamer0.10-good-plugins</span></span><br></pre></td></tr></table></figure>
<p><strong>8.英特尔+英伟达双显卡，使用英伟达显卡运行程序</strong><br>用终端在需要用英伟达显卡执行的程序前加入“prime-run”命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> prime-run &lt;程序名&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果要使用英伟达显卡运行steam里面的游戏，则设置该游戏的启动选项为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prime-run %command%</span><br></pre></td></tr></table></figure>
<p><strong>9.出现Failed to connect to raw.githubusercontent.com:443的解决办法</strong><br>开启代理，1080需要换成你自己代理的端口(ssr)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> exportall_proxy=socks5://127.0.0.1:1080</span></span><br></pre></td></tr></table></figure>
<p>关闭代理</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">unset</span> all_proxy</span></span><br></pre></td></tr></table></figure>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Linux/">Linux</a>
    </span>
    

    </div>

    
  </div>
</article>

  

	<section id="comment" class="comment">
		<div id="vcomments"></div>
	</section>
	<!-- LeanCloud -->
	<script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.10.0/dist/av-min.js"></script>
	<!-- Valine -->
	<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
	<script>
		new Valine({
			el: '#vcomments',
			appId: '4zd9J8JtWvgAna2eJx8eOdUv-gzGzoHsz',
			appKey: 'n12qRUkYT4zvH8FHSshMR5cS'
		})
	</script>






    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2021 Feeltalk
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>